---
layout: post
title: 'C++学习04 '
date: 2021-05-02
categories: 技术
tags: 学习,C++,析构函数,构造函数,拷贝函数
header-img: assets/img/rocky-coast-5059912_1920.jpg
---


## 构造函数和析构函数



对象的**初始化和清理**也是两个非常重要的安全问题

​	一个对象或者变量没有初始状态，对其使用后果是未知

​	同样的使用完一个对象或变量，没有及时清理，也会造成一定的安全问题



c++利用了**构造函数**和**析构函数**解决上述问题，这两个函数将会被编译器自动调用，完成对象初始化和清理工作。

对象的初始化和清理工作是编译器强制要我们做的事情，因此如果**我们不提供构造和析构，编译器会提供**

**编译器提供的构造函数和析构函数是空实现。**



**构造函数**包括：

- **普通构造**：无参构造、有参构造
- **拷贝构造**

构造函数存在三种调用方式：

​	括号法、显示法、隐式转换法

```c++
//2.1  括号法，常用
Person p1(10);
//注意1：调用无参构造函数不能加括号，如果加了编译器认为这是一个函数声明
//Person p2();

//2.2 显式法
Person p2 = Person(10); 
Person p3 = Person(p2);
//Person(10)单独写就是匿名对象  当前行结束之后，马上析构

//2.3 隐式转换法
Person p4 = 10; // Person p4 = Person(10); 
Person p5 = p4; // Person p5 = Person(p4);
```

系统默认提供三个函数：

1. 默认无参构造函数
2. 默认拷贝构造函数（浅拷贝，只进行值拷贝，会导致不可控的错误）
3. 默认析构函数

***用户定义有参构造函数后，则编译器不再提供默认无参构造函数；***

***用户定义拷贝构造函数后，则编译器不再提供其他构造函数。***
